{"version":3,"file":"pieshop.js","names":["window","onload","loadAllPies","setSeasonalLink","setFavorite","seasonalElement","document","getElementById","fresh","isFreshPieSeason","innerText","currentMonth","Date","getMonth","newFavorite","saveFavorite","getFavoritePie","favoriteElement","pieTable","fetch","then","response","json","data","string_data","JSON","stringify","pieMarkup","forEach","element","imageURL","name","description","price","innerHTML","loadNutritionInfo","console","info","log","catch","err","error","warn","saveFavorite","favorite","localStorage","setItem","getFavoritePie","window","storage","getItem"],"sources":["allPies.js","main.js"],"sourcesContent":["window.onload = function() {\r\n  loadAllPies();\r\n  setSeasonalLink();\r\n  setFavorite();\r\n  // loadNutritionInfo();\r\n}\r\n\r\nfunction setSeasonalLink() {\r\n\r\n  let seasonalElement = document.getElementById('seasonal');\r\n\r\n  let fresh = isFreshPieSeason();\r\n\r\n  if(fresh) {\r\n    seasonalElement.innerText = 'Fresh Seasonal Pies';\r\n  }\r\n  else {\r\n    seasonalElement.innerText = 'Frozen Pies';\r\n  }\r\n  \r\n}\r\n\r\nfunction isFreshPieSeason() {\r\n\r\n  let currentMonth = new Date().getMonth();\r\n\r\n  if(currentMonth >= 9 || currentMonth <= 1) {\r\n    return true; // October-February\r\n  }\r\n  else {\r\n    return false; // March-September\r\n  }\r\n}\r\n\r\nfunction setFavorite(newFavorite) {\r\n\r\n  if(newFavorite) {\r\n    saveFavorite(newFavorite);\r\n  }\r\n  else {\r\n    newFavorite = getFavoritePie();\r\n  }\r\n\r\n  let favoriteElement = document.getElementById('favorite');\r\n\r\n  favoriteElement.innerText = newFavorite;\r\n\r\n}\r\n\r\nfunction loadAllPies() {\r\n  let pieTable = document.getElementById('pieTableBody');\r\n\r\n  fetch('/api/pies')\r\n  .then(response => response.json())\r\n  .then(data => {\r\n\r\n    // console.groupCollapsed('pie data');\r\n    // console.dir(data);\r\n    // console.table(data);\r\n    // console.groupEnd();\r\n\r\n    // console.assert(data.length === 11, {pieCount: data.length, reason: 'Wrong number of pies'});\r\n\r\n    let string_data = JSON.stringify(data);\r\n\r\n    let pieMarkup = '';\r\n\r\n    data.forEach(element => {\r\n      pieMarkup += `\r\n        <tr>\r\n          <td><img src=${element.imageURL} width=\"100\" onclick=\"setFavorite('${element.name}')\"></td>\r\n          <td>${element.name}</td>\r\n          <td>${element.description}</td>\r\n          <td>${element.price}</td>\r\n          <td>View Details</td>\r\n        </tr>\r\n      `;\r\n    });\r\n\r\n    pieTable.innerHTML = pieMarkup;\r\n\r\n    // console.trace();\r\n  });\r\n}\r\n\r\nfunction loadNutritionInfo() {\r\n  \r\n  console.info('Attempting to retrieve the nutritional information from the server.');\r\n\r\n  fetch('/api/nutrition')\r\n  .then(response => response.json())\r\n  .then(data => console.log(data))\r\n  .catch(err => console.error('There was a problem retrieving the nutritional information.'));\r\n\r\n  console.warn('Eating too much pie is not good for you!');\r\n}","function saveFavorite(favorite) {\r\n  localStorage.setItem('favoritePie', favorite);\r\n}\r\n\r\nfunction getFavoritePie() {\r\n\r\n  let favorite = 'No favorite specified.';\r\n\r\n  if(window.localStorage)\r\n  {\r\n      let storage = window.localStorage;\r\n      if(storage.getItem('favoritePie'))\r\n      {\r\n          favorite = storage.getItem('favoritePie');\r\n      }\r\n  }\r\n\r\n  return favorite;\r\n}"],"mappings":"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"}